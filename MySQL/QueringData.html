<!DOCTYPE html>
<html>
<head>
	<title>MySQL - Quering Data</title>
    <link rel="icon" type="image/x-icon" href="../Assets/favicon.png">
	<link rel="stylesheet" type="text/css" href="../Assets/bulma.css">
	<link rel="stylesheet" type="text/css" href="../Assets/Style.css">
</head>
<body>
<div class="page card">

<h1>Quering Data</h1>
<h2>Select From</h2>
<p>The <code>SELECT</code> statement allows you to select data from one or more tables. To write a <code>SELECT</code> statement in MySQL, you use this syntax:</p>
<pre>
SELECT select_list
FROM table_name;
</pre>
<p>In this syntax:</p>
<ol>
    <li>First, specify one or more columns from which you want to select data after the <code>SELECT</code> keyword. If the <code>select_list</code> has multiple columns, you need to separate them by a comma (<code>,</code>).</li>
    <li>Second, specify the name of the table from which you want to select data after the <code>FROM</code> keyword.</li>
    <li>The semicolon (;) is optional, which denotes the end of a statement.</li>
</ol>
<p>When executing the <code>SELECT</code> statement, MySQL evaluates the <code>FROM</code> clause before the <code>SELECT</code> clause.</p>









<h3>Semicolon</h3>
<p>In MySQL, each statement is seperated by semicolon. Hence it is always a good practice to end a statement with a semicolon. If you have only one statement, then semicolon is optional. But if you have two or more statements, you need to use the semicolon(<code>;</code>) to separate them so that MySQL will execute each statement individually.</p>










<h3>MySQL is case insensitive</h3>
<p>The <code>SELECT</code> and <code>FROM</code> are the keywords. By convention, you write the SQL keywords in uppercase. However, it's not mandatory. Because SQL is case-insensitive, you can write the SQL statement in lowercase, uppercase, etc. For example:</p>
<pre>
select select_list
from table_name;
</pre>
<p>is a valid statement.</p>












<h3>Order of Execution</h3>
<p>When executing the <code>SELECT</code> statement, MySQL evaluates the <code>FROM</code> clause before the <code>SELECT</code> clause.</p>












<h3>Example : Select Single Column</h3>
<pre>
SELECT lastName
FROM employees;
</pre>
<p>The above statement will show a single column which contains list of last name from table <code>employees</code>.</p>

<h3>Example : Select Multiple Column</h3>
<pre>
SELECT 
    lastName, 
    firstName, 
    jobTitle
FROM
    employees;
</pre>
<p>The above query will list a table with three column which are lastName, firstName, and jobTitle from the table <code>employees</code>.</p>








<h3>Example : Use of Asterisk</h3>
<p>If you want to select data from all the columns of the employees table, you can specify all the column names in the SELECT clause like this:</p>
<pre>
SELECT 
    employeeNumber,
    lastName,
    firstName,
    extension,
    email,
    officeCode,
    reportsTo,
    jobTitle
FROM employees;
</pre>
<p>Alternatively, you can use the asterisk (*) which is the shorthand for all columns. For example:</p>
<pre>
SELECT * FROM employees;
</pre>
<p>The query returns data from all the columns of the <code>employees</code> table.</p>










<h2>SELECT</h2>
<p>Typically, you use a <code>SELECT</code> statement to select data from a table in the database. In this section we will learn, how to use the MySQL <code>SELECT</code> statement without referencing any table. It means that you can have a <code>SELECT</code> statement without the <code>FROM</code> clause like this:</p>
<pre>
SELECT select_list;
</pre>
<p>The following example uses the <code>SELECT</code> statement to perform a simple calculation:</p>
<pre>
SELECT 1 + 1;
</pre>
<p>Output:</p>
<pre>
+-------+
| 1 + 1 |
+-------+
|     2 |
+-------+
1 row in set (0.00 sec) 
</pre>
<p>MySQL has many built-in functions like string functions, date functions, and math functions. You can use the <code>SELECT</code> statement to execute one of these functions. For example, the following statement uses the <code>NOW()</code> function in the <code>SELECT</code> statement to return the current date and time of the server where MySQL server is running:</p>
<pre>
SELECT NOW();
</pre>
<p>Output:</p>
<pre>
+---------------------+
| NOW()               |
+---------------------+
| 2021-07-26 08:08:02 |
+---------------------+
1 row in set (0.00 sec)
</pre>
<p>Following is an another example where we concatenate multiple strings into a single string, with the help of <code>CONCAT()</code> function:</p>
<pre>
SELECT CONCAT('John',' ','Doe');
</pre>
<p>Output:</p>
<pre>
+--------------------------+
| CONCAT('John',' ','Doe') |
+--------------------------+
| John Doe                 |
+--------------------------+
1 row in set (0.00 sec)
</pre>
<p>The <code>CONCAT()</code> function accepts one or more strings and concatenates them into a single string.</p>









<h2>Column alias</h2>
<p>By default, MySQL uses the expression specified in the <code>SELECT</code> clause as the column name of the result. To change a column name of the result, you can use a column alias:</p>
<pre>
SELECT expression AS column_alias;
</pre>
<p>To assign an alias to a column, you place the <code>AS</code> keyword after the expression followed by a column alias. The <code>AS</code> keyword is optional, so you can skip it like this:</p>
<pre>
SELECT expression column_alias;
</pre>
<p>For example:</p>
<pre>
SELECT CONCAT('John',' ','Doe') AS name;
</pre>
<p>Output:</p>
<pre>
+----------+
| name     |
+----------+
| John Doe |
+----------+
1 row in set (0.00 sec)
</pre>
<p>If the column alias contains spaces, you need to place it inside quotes like this:</p>
<pre>
SELECT CONCAT('Jane',' ','Doe') AS 'Full name';
</pre>
<p>Output:</p>
<pre>
+-----------+
| Full name |
+-----------+
| John Doe  |
+-----------+
1 row in set (0.00 sec)
</pre>











<h2>ORDER BY</h2>
<p>When you use the <code>SELECT</code> statement to query data from a table, the order of rows in the result is unspecified. To sort the rows in the result, you add the <code>ORDER BY</code> clause to the <code>SELECT</code> statement. The following illustrates the syntax of the <code>ORDER BY</code> clause:</p>
<pre>
SELECT 
    select_list
FROM 
    table_name
ORDER BY 
    column1 [ASC|DESC], 
    column2 [ASC|DESC],
    ...;
</pre>
<p>In this syntax, you specify the one or more columns that you want to sort after the <code>ORDER BY</code> clause. The <code>ASC</code> stands for ascending and the <code>DESC</code> stands for descending. You use <code>ASC</code> to sort the result in ascending order and <code>DESC</code> to sort the result in descending order.</p>


<h3>Example 1 : ASC</h3>
<pre>
ORDER BY column1 ASC;
</pre>
<p>This <code>ORDER BY</code> clause sorts the result by the values in the column1 in ascending order.</p>

<h3>Example 2 : DESC</h3>
<pre>
ORDER BY column1 DESC;
</pre>
<p>This <code>ORDER BY</code> clause sorts the result by the values in the column1 in descending order.</p>



<h3>Example 3 : Default ASC</h3>
<p>By default, the <code>ORDER BY</code> clause uses ASC if you don't explicitly specify any option. Therefore, the following <code>ORDER BY</code> clauses are equivalent:</p>
<pre>
ORDER BY column1 ASC;
</pre>
<p>and</p>
<pre>
ORDER BY column1;
</pre>


<h3>Example 4 : Multiple Column</h3>
<p>If you want to sort the result by multiple columns, you specify a comma-separated list of columns in the <code>ORDER BY</code> clause:</p>
<pre>
ORDER BY
    column1,
    column2;
</pre>
<p>In this case, the <code>ORDER BY</code> clause sorts the result by column1 in ascending order first and sorts the sorted result by column2 in ascending order.</p>
<p>In the following example we sort the result by a column in ascending order and then by another column in descending order:</p>
<pre>
ORDER BY
    column1 ASC,
    column2 DESC;
</pre>
<p>In this case, the ORDER BY clause:</p>
<ol>
    <li>First, sort the result by the values in the column1 in ascending order.</li>
    <li>Then, sort the sorted result set by the values in the column2  in descending order. Note that the order of values in the column1 will not change in this step, only the order of values in the column2 changes.</li>
</ol>


<h3>Order of execution</h3>
<p>When executing the <code>SELECT</code> statement with an <code>ORDER BY</code> clause, MySQL always evaluates the <code>ORDER BY</code> clause after the <code>FROM</code> and <code>SELECT</code> clauses.</p>

<h3>Example 5 : Use Expression</h3>
<p>We can also use <code>ORDER BY</code> clause on an expression column. The following query selects the order line items from the <code>orderdetails</code> table. It calculates the subtotal for each line item and sorts the result set based on the subtotal.</p>
<pre>
SELECT 
    orderNumber, 
    orderlinenumber, 
    quantityOrdered * priceEach 
FROM 
    orderdetails 
ORDER BY 
    quantityOrdered * priceEach DESC;
</pre>
<p>To make the query more readable, you can assign a column alias to the expression in the <code>SELECT</code> clause and use the column alias in the <code>ORDER BY</code> clause as shown in the following query:</p>
<pre>
SELECT 
    orderNumber, 
    orderLineNumber, 
    quantityOrdered * priceEach AS subtotal 
FROM 
    orderdetails 
ORDER BY 
    subtotal DESC;
</pre>
<p>In this example, we use <code>subtotal</code> as the column alias for the expression <code>quantityOrdered * priceEach</code> and sort the result set by the <code>subtotal</code> alias. Since MySQL evaluates the <code>SELECT</code> clause before the <code>ORDER BY</code> clause, you can use the column alias specified in the <code>SELECT</code> clause in the <code>ORDER BY</code> clause.</p>


<h3>Example 5 : FIELD()</h3>
<p>The <code>FIELD()</code> function returns the index (position) of a value within a list of values.</p>
<pre>
FIELD(value, value1, value2, ...)
</pre>
<p>In this syntax:</p>
<ol>
    <li><code>value</code>: The value for which you want to find the position.</li>
    <li><code>value1, value2, ...</code>: A list of values against which you want to compare the specified value.</li>
</ol>
<p>The <code>FIELD()</code> function returns the position of the <code>value</code> in the list of values value1, value2, and so on.</p>
<p>If the <code>value</code> is not found in the list, the <code>FIELD()</code> function returns <code>0</code>.</p>
<p>For example, the following query returns <code>1</code> because the position of the string 'A' is the first position on the list 'A', 'B', and 'C'</p>
<pre>
SELECT FIELD('A', 'A', 'B','C');
</pre>
<p>Output:</p>
<pre>
+--------------------------+
| FIELD('A', 'A', 'B','C') |
+--------------------------+
|                        1 |
+--------------------------+
1 row in set (0.00 sec)
</pre>
<p>And the following example returns <code>2</code> because 'B' has the second position in the list:</p>
<pre>
SELECT FIELD('B', 'A','B','C');
</pre>
<p>Output:</p>
<pre>
+-------------------------+
| FIELD('B', 'A','B','C') |
+-------------------------+
|                       2 |
+-------------------------+
1 row in set (0.00 sec)
</pre>
<p>In our sample database in <code>orders</code> table, suppose that you want to sort the sales orders based on their statuses in the following order: In Process, On Hold, Canceled, Resolved, Disputed, Shipped. To do this, you can use the <code>FIELD()</code> function to map each order status to a number and sort the result by the result of the <code>FIELD()</code> function:</p>
<pre>
SELECT 
    orderNumber, 
    status 
FROM 
    orders 
ORDER BY 
    FIELD(
        status, 
        'In Process', 
        'On Hold', 
        'Cancelled', 
        'Resolved', 
        'Disputed', 
        'Shipped'
    );
</pre>
<p>Output:</p>
<pre>
+-------------+------------+
| orderNumber | status     |
+-------------+------------+
|       10425 | In Process |
|       10421 | In Process |
|       10422 | In Process |
|       10420 | In Process |
|       10424 | In Process |
|       10423 | In Process |
|       10414 | On Hold    |
|       10401 | On Hold    |
|       10334 | On Hold    |
|       10407 | On Hold    |
...
</pre>






<h2>Where Clause</h2>
<p>The <code>WHERE</code> clause allows you to specify a search condition for the rows returned by a query. The following shows the syntax of the <code>WHERE</code> clause:</p>
<pre>
SELECT 
    select_list
FROM
    table_name
WHERE
    search_condition;
</pre>
<p>The <code>search_condition</code> is a combination of one or more expressions using the logical operator <code>AND</code>, <code>OR</code> and <code>NOT</code>. The <code>SELECT</code> statement will include any row that satisfies the <code>search_condition</code> in the result. Besides the <code>SELECT</code> statement, you can use the <code>WHERE</code> clause in the <code>UPDATE</code> or <code>DELETE</code> statement to specify which rows to update or delete.</p>
<h3>Order of Execution</h3>
<p>When executing a <code>SELECT</code> statement with a <code>WHERE</code> clause, MySQL evaluates the <code>WHERE</code> clause after the <code>FROM</code> clause and before the <code>SELECT</code> and <code>ORDER BY</code> clauses:</p>

<h3>Example 1 : Equality Operator</h3>
<p>The following query uses the <code>WHERE</code> clause to find all employees whose job titles are <code>Sales Rep</code>:</p>
<pre>
SELECT 
    lastname, 
    firstname, 
    jobtitle
FROM
    employees
WHERE
    jobtitle = 'Sales Rep';
</pre>
<p>Output:</p>
<pre>
+-----------+-----------+-----------+
| lastname  | firstname | jobtitle  |
+-----------+-----------+-----------+
| Jennings  | Leslie    | Sales Rep |
| Thompson  | Leslie    | Sales Rep |
| Firrelli  | Julie     | Sales Rep |
| Patterson | Steve     | Sales Rep |
| Tseng     | Foon Yue  | Sales Rep |
| Vanauf    | George    | Sales Rep |
| Bondur    | Loui      | Sales Rep |
| Hernandez | Gerard    | Sales Rep |
| Castillo  | Pamela    | Sales Rep |
| Bott      | Larry     | Sales Rep |
| Jones     | Barry     | Sales Rep |
| Fixter    | Andy      | Sales Rep |
| Marsh     | Peter     | Sales Rep |
| King      | Tom       | Sales Rep |
| Nishi     | Mami      | Sales Rep |
| Kato      | Yoshimi   | Sales Rep |
| Gerard    | Martin    | Sales Rep |
+-----------+-----------+-----------+
17 rows in set (0.00 sec)
</pre>
<p>In this example, the <code>SELECT</code> statement examines all rows of the employees table and selects only rows whose values are in the jobTitle column are <code>Sales Rep</code>.</p>


<h3>Example 2 : And Operator</h3>
<p>The following example uses the <code>WHERE</code> clause to find employees whose job titles are <code>Sales Rep</code> and office codes are <code>1</code>:</p>
<pre>
SELECT 
    lastname, 
    firstname, 
    jobtitle,
    officeCode
FROM
    employees
WHERE
    jobtitle = 'Sales Rep' AND officeCode = 1;
</pre>
<p>Output:</p>
<pre>
+----------+-----------+-----------+------------+
| lastname | firstname | jobtitle  | officeCode |
+----------+-----------+-----------+------------+
| Jennings | Leslie    | Sales Rep | 1          |
| Thompson | Leslie    | Sales Rep | 1          |
+----------+-----------+-----------+------------+
2 rows in set (0.00 sec)
</pre>
<p>In this example, the expression in the <code>WHERE</code> clause uses the <code>AND</code> operator to combine two conditions:</p>
<pre>
jobtitle = 'Sales Rep' AND officeCode = 1;
</pre>
<p>The <code>AND</code> operator evaluates to <code>TRUE</code> only if both expressions are evaluated to <code>TRUE</code>. Therefore, the query returns rows whose values in the <code>jobTitle</code> column is <code>Sales Rep</code> and <code>officeCode</code> is <code>1</code>.</p>


<h3>Example 3 : OR Operator</h3>
<p>This query finds employees whose job title is <code>Sales Rep</code> or employees who locate the office with office code <code>1</code>:</p>
<pre>
SELECT 
    lastName, 
    firstName, 
    jobTitle, 
    officeCode
FROM
    employees
WHERE
    jobtitle = 'Sales Rep' OR officeCode = 1
ORDER BY 
    officeCode, jobTitle;
</pre>
<p>Output:</p>
<pre>
+-----------+-----------+--------------------+------------+
| lastName  | firstName | jobTitle           | officeCode |
+-----------+-----------+--------------------+------------+
| Murphy    | Diane     | President          | 1          |
| Bow       | Anthony   | Sales Manager (NA) | 1          |
| Jennings  | Leslie    | Sales Rep          | 1          |
| Thompson  | Leslie    | Sales Rep          | 1          |
| Firrelli  | Jeff      | VP Marketing       | 1          |
| Patterson | Mary      | VP Sales           | 1          |
| Firrelli  | Julie     | Sales Rep          | 2          |
| Patterson | Steve     | Sales Rep          | 2          |
| Tseng     | Foon Yue  | Sales Rep          | 3          |
| Vanauf    | George    | Sales Rep          | 3          |
| Bondur    | Loui      | Sales Rep          | 4          |
| Hernandez | Gerard    | Sales Rep          | 4          |
| Castillo  | Pamela    | Sales Rep          | 4          |
| Gerard    | Martin    | Sales Rep          | 4          |
| Nishi     | Mami      | Sales Rep          | 5          |
| Kato      | Yoshimi   | Sales Rep          | 5          |
| Fixter    | Andy      | Sales Rep          | 6          |
| Marsh     | Peter     | Sales Rep          | 6          |
| King      | Tom       | Sales Rep          | 6          |
| Bott      | Larry     | Sales Rep          | 7          |
| Jones     | Barry     | Sales Rep          | 7          |
+-----------+-----------+--------------------+------------+
21 rows in set (0.00 sec)
</pre>
<p>The <code>OR</code> operator evaluates to <code>TRUE</code> only if one of the expressions evaluates to <code>TRUE</code>:</p>
<pre>
jobtitle = 'Sales Rep' OR officeCode = 1
</pre>
<p>Therefore, the query returns any employee who has the job title <code>Sales Rep</code> or office code <code>1</code>.</p>


<h3>Example 4 : Other Operators</h3>
<p>The following query finds employees who are located in offices whose office code is from <code>1</code> to <code>3</code>:</p>
<pre>
SELECT 
    firstName, 
    lastName, 
    officeCode
FROM
    employees
WHERE
    officeCode BETWEEN 1 AND 3
ORDER BY officeCode;
</pre>
<p>The following query finds the employees whose last names end with the string 'son':</p>
<pre>
SELECT 
    firstName, 
    lastName
FROM
    employees
WHERE
    lastName LIKE '%son'
ORDER BY firstName;
</pre>
<p>The following example uses the <code>WHERE</code> clause with the <code>IN</code> operator to find employees who are located in the offices with the codes <code>1</code>, <code>2</code>, and <code>3</code>:</p>
<pre>
SELECT 
    firstName, 
    lastName, 
    officeCode
FROM
    employees
WHERE
    officeCode IN (1 , 2, 3)
ORDER BY 
    officeCode;
</pre>
<p>The following statement uses the <code>WHERE</code> clause with the <code>IS NULL</code> operator to get the rows with the values in the <code>reportsTo</code> column are <code>NULL</code>:</p>
<pre>
SELECT 
    lastName, 
    firstName, 
    reportsTo
FROM
    employees
WHERE
    reportsTo IS NULL;
</pre>

<h3>Example 5 : Comparison Operators</h3>
<p>The following table shows the comparison operators that you can use to form the expression in the <code>WHERE</code> clause.</p>
<ol>
    <li><code>=</code> : Equal to. You can use it with almost any data type.</li>
    <li><code><></code>	or <code>!=</code>: Not equal to.</li>
    <li><code><</code>: Less than. You typically use it with numeric and date/time data types.</li>
    <li><code>></code>:	Greater than.</li>
    <li><code><=</code>: Less than or equal to.</li>
    <li><code>>=</code>: Greater than or equal to.</li>
</ol>
<p>Here is an example: The following query uses the not equal to (<code><></code>) operator to find all employees who are not the <code>Sales Rep</code>:</p>
<pre>
SELECT 
    lastname, 
    firstname, 
    jobtitle
FROM
    employees
WHERE
    jobtitle <> 'Sales Rep';
</pre>
<p>The following query finds employees whose office code is greater than <code>5</code>:</p>
<pre>
SELECT 
    lastname, 
    firstname, 
    officeCode
FROM
    employees
WHERE 
    officecode > 5;
</pre>
<p>The following query returns employees with office code less than or equal to <code>4</code>(<code><=4</code>):</p>
<pre>
SELECT 
    lastname, 
    firstname, 
    officeCode
FROM
    employees
WHERE 
    officecode <= 4;
</pre>






<h2>Distinct</h2>
<p>When querying data from a table, you may get duplicate rows. To remove these duplicate rows, you use the <code>DISTINCT</code> clause in the <code>SELECT</code> statement. Here's the syntax of the <code>DISTINCT</code> clause:</p>
<pre>
SELECT DISTINCT
    select_list
FROM
    table_name
WHERE 
    search_condition
ORDER BY 
    sort_expression;
</pre>
<p>In this syntax, you specify one or more columns that you want to select distinct values after the <code>SELECT DISTINCT</code> keywords. If you specify one column, the <code>DISTINCT</code> clause will evaluate the uniqueness of rows based on the values of that column. However, if you specify two or more columns, the <code>DISTINCT</code> clause will use the values of these columns to evaluate the uniqueness of the rows.</p>
<h3>Order of Execution</h3>
<p>When executing the <code>SELECT</code> statement with the <code>DISTINCT</code> clause, MySQL evaluates the <code>DISTINCT</code> clause after the <code>FROM</code>, <code>WHERE</code>, and <code>SELECT</code> clause and before the <code>ORDER BY</code> clause:</p>


<h3>Example 1 : Distinct with single column</h3>
<p>First, select the last names from the employees table using the following <code>SELECT DISTINCT</code> statement:</p>
<pre>
SELECT DISTINCT 
    lastname
FROM
    employees
ORDER BY 
    lastname;
</pre>


<h3>DISTINCT and NULL values</h3>
<p>When you specify a column that has <code>NULL</code> values in the <code>DISTINCT</code> clause, the <code>DISTINCT</code> clause will keep only one <code>NULL</code> value because it considers all <code>NULL</code> values are the same.</p>

<h3>Example 2 : Distinct with multiple columns</h3>
<p>In the result of the following query, you will never get a duplicate row that has same city and state both.</p>
<pre>
SELECT DISTINCT
    state, city
FROM
    customers
WHERE
    state IS NOT NULL
ORDER BY 
    state, 
    city;
</pre>






<h2>AND</h2>
<p>MySQL doesn't have a built-in Boolean type. Instead, it uses the number zero as <code>FALSE</code> and non-zero values as <code>TRUE</code>. The <code>AND</code> operator is a logical operator that combines two or more Boolean expressions and returns <code>1</code>, <code>0</code>, or <code>NULL</code>:</p>
<pre>
A AND B
</pre>
<p>In this expression, <code>A</code> and <code>B</code> are called operands. They can be literal values or expressions. The logical <code>AND</code> operator returns <code>1</code> if both <code>A</code> and <code>B</code> are non-zero and not <code>NULL</code>. It returns <code>0</code> if either operand is zero. If any of the operand or both are <code>NULL</code>, it returns <code>NULL</code>.</p>

<h3>Example 1</h3>
<pre>
SELECT 1 AND 1;

+---------+
| 1 AND 1 |
+---------+
|       1 |
+---------+
1 row in set (0.00 sec)
</pre>

<h3>Example 2</h3>
<p>The logical AND operator returns <code>0</code> if <code>A</code> or <code>B</code> is zero or both <code>A</code> and <code>B</code> are zero:</p>
<pre>
SELECT 1 AND 0, 0 AND 1, 0 AND 0, 0 AND NULL;

+---------+---------+---------+------------+
| 1 AND 0 | 0 AND 1 | 0 AND 0 | 0 AND NULL |
+---------+---------+---------+------------+
|       0 |       0 |       0 |          0 |
+---------+---------+---------+------------+
1 row in set (0.00 sec)
</pre>

<h3>Example 3</h3>
<p>The logical <code>AND</code> operator returns <code>NULL</code> if either operand is <code>NULL</code> or both operands are <code>NULL</code>.</p>
<pre>
SELECT 1 AND NULL, NULL AND NULL;

+------------+---------------+
| 1 AND NULL | NULL AND NULL |
+------------+---------------+
|       NULL |          NULL |
+------------+---------------+
1 row in set (0.00 sec)
</pre>








</div>
</body>
</html>